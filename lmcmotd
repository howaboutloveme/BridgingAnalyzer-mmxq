import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.configuration.file.YamlConfiguration;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.plugin.java.JavaPlugin;

import java.io.File;

public class MotdPlugin extends JavaPlugin implements Listener {

    private FileConfiguration config;

    @Override
    public void onEnable() {
        // 创建配置文件
        this.saveDefaultConfig();
        config = this.getConfig();

        // 读取配置文件并设置MOTD
        // 注意：MOTD在首次插件启动时设置，后续变动需玩家加入事件触发
        String motd = getMotd();
        if (motd != null) {
            Bukkit.getServer().setMotd(motd);
        }

        // 注册事件监听
        getServer().getPluginManager().registerEvents(this, this);
    }

    @EventHandler
    public void onPlayerJoin(PlayerJoinEvent event) {
        // 每次玩家加入时，重新读取并设置MOTD
        String motd = getMotd();
        if (motd != null) {
            Bukkit.getServer().setMotd(motd);
        }
    }

    private String getMotd() {
        String firstLine = ChatColor.RED + config.getString("motd.firstLine", "红色服务器");
        String secondLine = ChatColor.YELLOW + config.getString("motd.secondLine", "黄色欢迎游玩");
        return firstLine + "\n" + secondLine;
    }
}
```

### 创建默认配置文件

默认配置文件`config.yml`将如下所示：

```yaml
motd:
  firstLine: 红色服务器
  secondLine: 黄色欢迎游玩